<!-- {% if request.endpoint == 'public_timeline' %}
Public Timeline
{% elif request.endpoint == 'user_timeline' %}
{{ profile_user.username }}'s Timeline
{% else %}
My Timeline
{% endif %}
{% endblock %}
{% block body %}
<h2>Public Timeline</h2>

{% if g.user %}
{% if request.endpoint == 'user_timeline' %}
<div class=followstatus>
    {% if g.user.user_id == profile_user.user_id %}
    This is you!
    {% elif followed %}
    You are currently following this user.
    <a class=unfollow href="{{ url_for('unfollow_user', username=profile_user.username)
          }}">Unfollow user</a>.
    {% else %}
    You are not yet following this user.
    <a class=follow href="{{ url_for('follow_user', username=profile_user.username)
          }}">Follow user</a>.
    {% endif %}
</div>
{% elif request.endpoint == 'timeline' %}
<div class=twitbox>
    <h3>What's on your mind {{ g.user.username }}?</h3>
    <form action="{{ url_for('add_message') }}" method=post>
        <p><input type=text name=text size=60>
            <input type=submit value="Share">
    </form>
</div> -->

<%- include('../partials/head.ejs'); %>
    <p> <%= locals.user %>'s profile page  </p>
<%- include('../partials/header.ejs'); %>

<% if (locals.following) { %>
    <strong><a href="/user/unfollow/<%= locals.user %>">Unfollow <%= locals.user %></a></strong>
<% } else { %>
    <strong><a href="/user/follow/<%= locals.user %>">Follow <%= locals.user %></a></strong>
    <% } %>

<ul class=messages>
    <% if (locals.messages) { %>
        <% messages.forEach( msg => { %>
        <li>
            <img class="avatar" src="/avatar.png">
            <p>
                <strong><a href="/user/<%= msg.username %>"><%= msg.username %></a></strong>
                <%= msg.text %>
                <small>&mdash; <%= msg.pub_date %></small>
            </p>
        </li>
        <% }) %>
    <% } else { %>
        <li><em>There's no message so far.</em></li>
    <% } %>
</ul>

<%- include('../partials/footer.ejs'); %>